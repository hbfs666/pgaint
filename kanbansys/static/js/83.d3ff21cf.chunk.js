"use strict";(self.webpackChunkkanban_frontend=self.webpackChunkkanban_frontend||[]).push([[83],{7083:(e,n,t)=>{t.r(n),t.d(n,{default:()=>D});var r=t(9950),o=t(6873),a=t(4857),i=t(6589),l=t(5333),s=t(6491),d=t(3230),c=t(4745),u=t(2053),p=t(2472),g=t(899),h=t(226),m=t(3464),x=t(33),y=t(8170),A=t(6),f=t(3266),_=t(9925),b=t(9739),j=t(2056),C=t(8999),v=t(4121),k=t(5604),S=t(9532),W=t(4968),w=t(1778),T=t(2819),I=t(4414);const N=(0,k.A)((0,r.lazy)((()=>t.e(173).then(t.bind(t,5173))))),P=(0,k.A)((0,r.lazy)((()=>t.e(247).then(t.bind(t,3247))))),q=(0,k.A)((0,r.lazy)((()=>t.e(860).then(t.bind(t,4860))))),z=(0,k.A)((0,r.lazy)((()=>t.e(382).then(t.bind(t,8382))))),D=e=>{let{kanbanRecord:n,setActiveStep:t}=e;const k=(0,a.A)(),D=(0,i.A)(k.breakpoints.down("xl")),E=(0,i.A)(k.breakpoints.down("sm")),G=(0,W.q)(),[H,O]=(0,r.useState)([]),[R,U]=(0,r.useState)(!1),[F,M]=(0,r.useState)(!1),[L,$]=(0,r.useState)(null),[B,K]=(0,r.useState)({category_id:"",group_name:"",group_condition:"",category_sequence:"",station_list:"",category_type:""}),[J,Y]=(0,r.useState)(!1),[Q,V]=(0,r.useState)(null),X=(0,w.n)({mutationFn:e=>(0,T.xx)(e),onError:e=>{G("Error deleting category group setting: "+e.message,"error")},onSuccess:()=>{G("Category Setting deleted successfully","success"),Z.mutate()}}),Z=(0,w.n)({mutationFn:()=>(0,T.BL)(n.mapping_key),onMutate:()=>{},onError:e=>{G("Error in creating kanban: "+e.message,"error")},onSuccess:e=>{O(e),G("Kanban fetched successfully","success")}}),ee=(0,w.n)({mutationFn:e=>(0,T.J_)(n.mapping_key,e.category_id,e.group_name,e.group_condition,e.category_sequence,e.station_list,e.category_type),onError:e=>{G("Error saving category: "+e.response.data,"error")},onSuccess:()=>{G("Category saved successfully","success"),Z.mutate()}});(0,r.useEffect)((()=>{null==n&&G("Please create Kanban record ","error"),Z.mutate()}),[n]);const ne=e=>{null!=n?(K(e),U(!0)):G("mapping key not found ","error")},te=()=>{U(!1)},re=e=>{const{name:n,value:t}=e.target;K((e=>({...e,[n]:t})))},oe=[{field:"group_name",headerName:"Group Name",flex:1,minWidth:100,headerAlign:"center",align:"center"},{field:"group_condition",headerName:"Group Condition",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"category_type",headerName:"Category Type",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"station_list",headerName:"Station List",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"category_sequence",headerName:"Category Sequence",flex:1,minWidth:100,headerAlign:"center",align:"center"},{field:"actions",headerName:"Actions",sortable:!1,minWidth:150,headerAlign:"center",align:"center",renderCell:e=>(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.A,{color:"secondary",onClick:()=>{return n=e.row,V(n),void Y(!0);var n},disabled:J,children:(0,I.jsx)(j.A,{sx:{fill:"dark"===k.palette.mode?"white":"black",fontSize:"large"}})}),(0,I.jsx)(l.A,{color:"primary",onClick:()=>ne(e.row),disabled:R,children:(0,I.jsx)(C.A,{sx:{fill:"lightgreen",fontSize:"large"}})}),(0,I.jsx)(l.A,{color:"secondary",onClick:()=>{return n=e.row,V(n),$(n.category_id),void M(!0);var n},disabled:F,children:(0,I.jsx)(v.A,{sx:{fill:"orange",fontSize:"large"}})})]})}];return(0,I.jsxs)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minWidth:"100%",children:[(0,I.jsxs)(s.A,{width:D?"80vw":"100%",height:"65vh",position:"relative",children:[(0,I.jsx)(s.A,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",children:(0,I.jsxs)(d.A,{direction:"row",spacing:2,alignItems:"center",divider:(0,I.jsx)(c.A,{orientation:"vertical",flexItem:!0}),sx:{flexWrap:"wrap"},children:[(0,I.jsx)(s.A,{sx:{maxWidth:"100%",textAlign:{xs:"center",sm:"left"}},children:(0,I.jsxs)(u.A,{variant:"h3",gutterBottom:!0,children:[E?"":"Kanban Name: ",(0,I.jsx)(u.A,{variant:E?"h4":"h3",color:"green",component:"span",style:{textTransform:"uppercase"},fontWeight:"600",children:null===n||void 0===n?void 0:n.kanban_name})]})}),(0,I.jsx)(s.A,{sx:{maxWidth:"100%",textAlign:{xs:"center",sm:"left"}},children:(0,I.jsxs)(u.A,{variant:"h3",gutterBottom:!0,children:[E?"":"Product Type: ",(0,I.jsx)(u.A,{variant:E?"h4":"h3",color:"green",component:"span",style:{textTransform:"uppercase"},fontWeight:"600",children:null===n||void 0===n?void 0:n.product_type})]})})]})}),R?null:(0,I.jsx)(p.A,{color:"primary","aria-label":"add",sx:{position:"absolute",top:"30vh",right:-30,zIndex:1,backgroundColor:"dark"===k.palette.mode?"green":k.palette.primary.main},onClick:()=>ne({group_name:"",group_condition:"",station_list:"",category_sequence:""}),children:(0,I.jsx)(S.A,{})}),(0,I.jsx)(o.z,{rows:H,columns:oe,getRowId:e=>e.category_id,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,disableSelectionOnClick:!0,disableRowSelectionOnClick:!0,disableColumnSorting:!0,disableColumnResize:!0,hideFooter:!0,sx:{"& .super-app-theme--header":{backgroundColor:k.palette.background.paper,color:k.palette.text.secondary},"& .MuiDataGrid-cell":{color:k.palette.text.primary},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f0f0f0"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold",fontSize:"1rem"},minWidth:"100%"}}),(0,I.jsx)(s.A,{children:(0,I.jsxs)(g.Ay,{container:!0,spacing:2,children:[(0,I.jsx)(g.Ay,{item:!0,xs:6,children:(0,I.jsx)(h.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>t(0),sx:{backgroundColor:(k.palette.mode,"#1976d2"),"&:hover":{backgroundColor:(k.palette.mode,"#1565c0"),boxShadow:`0px 4px 6px ${k.palette.primary.main}`},marginTop:"10px"},children:"Perious"})}),(0,I.jsx)(g.Ay,{item:!0,xs:6,children:(0,I.jsx)(h.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>t(2),sx:{backgroundColor:(k.palette.mode,"#4caf50"),"&:hover":{backgroundColor:(k.palette.mode,"#388e3c"),boxShadow:`0px 4px 6px ${k.palette.primary.main}`},marginTop:"10px"},children:"Next"})})]})})]}),(0,I.jsxs)(m.A,{open:R,onClose:te,PaperProps:{style:{backgroundColor:k.palette.background.default,color:k.palette.text.primary,minWidth:"60vw",minHeight:"80vh"}},children:[(0,I.jsxs)(x.A,{color:k.palette.primary.main,mb:"5px",sx:{backgroundColor:"lightgreen",padding:"10px"},border:`1px solid ${k.palette.divider}`,children:[B.category_id?"Edit Header | Group Name: "+B.group_name:"Add Header Category"," "]}),(0,I.jsxs)(y.A,{children:[(0,I.jsxs)(s.A,{border:`1px solid ${k.palette.divider}`,borderRadius:1,p:2,width:"100%",children:[(0,I.jsx)(u.A,{children:"Group Name"}),(0,I.jsxs)(A.A,{value:B.group_name,onChange:e=>re(e),name:"group_name",fullWidth:!0,id:"Header-Group-Name",children:[(0,I.jsx)(f.A,{value:"WIP",children:"WIP"}),(0,I.jsx)(f.A,{value:"INPUT",children:"INPUT"}),(0,I.jsx)(f.A,{value:"OUTPUT",children:"OUTPUT"})]})]}),(0,I.jsx)(P,{conditions:B.group_condition?B.group_condition.split("/"):[],onConditionsChange:e=>{K((n=>({...n,group_condition:e.join("/")})))},conditionsList:"DISPATCH_ID,SN_MODEL,DISPOSITION".split(",")}),(0,I.jsx)(N,{stations:B.station_list?B.station_list.split("/"):[],onStationsChange:e=>{K((n=>({...n,station_list:e.join("/")})))}}),(0,I.jsx)(_.A,{margin:"dense",label:"Category Sequence",name:"category_sequence",id:"category-sequence",value:B.category_sequence,onChange:re,fullWidth:!0,type:"number",InputProps:{style:{color:k.palette.text.primary}}}),(0,I.jsxs)(s.A,{border:`1px solid ${k.palette.divider}`,borderRadius:1,p:2,width:"100%",children:[(0,I.jsx)(u.A,{children:"Category Type"}),(0,I.jsxs)(A.A,{value:B.category_type,onChange:e=>re(e),label:"Category Type",name:"category_type",fullWidth:!0,id:"Body-category-Type",children:[(0,I.jsx)(f.A,{value:"hourly",children:"HOURLY"}),(0,I.jsx)(f.A,{value:"wip",children:"WIP"})]})]})]}),(0,I.jsxs)(b.A,{children:[(0,I.jsx)(h.A,{onClick:te,sx:{color:k.palette.error.main,fontWeight:"bold"},children:"Cancel"}),(0,I.jsx)(h.A,{onClick:B.category_id?()=>{ee.mutate(B),U(!1)}:()=>{ee.mutate({category_id:"",group_name:B.group_name||"",group_condition:B.group_condition||"",category_sequence:B.category_sequence||"",station_list:B.station_list||"",category_type:B.category_type||""}),U(!1)},color:"primary",sx:{color:k.palette.success.main,fontWeight:"bold"},children:"Save"})]})]}),Q&&(0,I.jsx)(q,{open:J,onClose:()=>{Y(!1),V(null)},rowData:Q}),F?(0,I.jsx)(z,{open:F,onClose:()=>{$(null),V(null),M(!1)},onConfirm:()=>{return e=L,X.mutate(e),void M(!1);var e},onRow:Q}):null]})}}}]);