"use strict";(self.webpackChunkkanban_frontend=self.webpackChunkkanban_frontend||[]).push([[860],{4860:(e,o,r)=>{r.r(o),r.d(o,{default:()=>ge});var t=r(9950),n=r(6873),a=r(8205),i=r(4857),l=r(6589),s=r(2053),d=r(5333),c=r(6491),u=r(3464),m=r(33),p=r(8170),h=r(2472),x=r(226),f=r(6),g=r(3266),A=r(5979),v=r(8168),y=r(8587),C=r(2004),b=r(8465),j=r(9254),S=r(8463),w=r(1763),k=r(423);function z(e){return(0,k.Ay)("MuiFormGroup",e)}(0,w.A)("MuiFormGroup",["root","row","error"]);var R=r(9766),M=r(8624),N=r(4414);const _=["className","row"],F=(0,j.Ay)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,r.row&&o.row]}})((e=>{let{ownerState:o}=e;return(0,v.A)({display:"flex",flexDirection:"column",flexWrap:"wrap"},o.row&&{flexDirection:"row"})})),W=t.forwardRef((function(e,o){const r=(0,S.b)({props:e,name:"MuiFormGroup"}),{className:t,row:n=!1}=r,a=(0,y.A)(r,_),i=(0,R.A)(),l=(0,M.A)({props:r,muiFormControl:i,states:["error"]}),s=(0,v.A)({},r,{row:n,error:l.error}),d=(e=>{const{classes:o,row:r,error:t}=e,n={root:["root",r&&"row",t&&"error"]};return(0,b.A)(n,z,o)})(s);return(0,N.jsx)(F,(0,v.A)({className:(0,C.A)(d.root,t),ownerState:s,ref:o},a))}));function E(e){return(0,k.Ay)("MuiRadioGroup",e)}(0,w.A)("MuiRadioGroup",["root","row","error"]);var $=r(1506),G=r(8733);const D=t.createContext(void 0);var I=r(1014);const L=["actions","children","className","defaultValue","name","onChange","value"],P=t.forwardRef((function(e,o){const{actions:r,children:n,className:a,defaultValue:i,name:l,onChange:s,value:d}=e,c=(0,y.A)(e,L),u=t.useRef(null),m=(e=>{const{classes:o,row:r,error:t}=e,n={root:["root",r&&"row",t&&"error"]};return(0,b.A)(n,E,o)})(e),[p,h]=(0,G.A)({controlled:d,default:i,name:"RadioGroup"});t.useImperativeHandle(r,(()=>({focus:()=>{let e=u.current.querySelector("input:not(:disabled):checked");e||(e=u.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const x=(0,$.A)(o,u),f=(0,I.A)(l),g=t.useMemo((()=>({name:f,onChange(e){h(e.target.value),s&&s(e,e.target.value)},value:p})),[f,s,h,p]);return(0,N.jsx)(D.Provider,{value:g,children:(0,N.jsx)(W,(0,v.A)({role:"radiogroup",ref:x,className:(0,C.A)(m.root,a)},c,{children:n}))})}));var T=r(6497),H=r(9269),O=r(6282),V=r(5471);const B=(0,V.A)((0,N.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),q=(0,V.A)((0,N.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var Y=r(9608);const U=(0,j.Ay)("span",{shouldForwardProp:Y.A})({position:"relative",display:"flex"}),X=(0,j.Ay)(B)({transform:"scale(1)"}),Z=(0,j.Ay)(q)((e=>{let{theme:o,ownerState:r}=e;return(0,v.A)({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest})},r.checked&&{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})})}));const J=function(e){const{checked:o=!1,classes:r={},fontSize:t}=e,n=(0,v.A)({},e,{checked:o});return(0,N.jsxs)(U,{className:r.root,ownerState:n,children:[(0,N.jsx)(X,{fontSize:t,className:r.background,ownerState:n}),(0,N.jsx)(Z,{fontSize:t,className:r.dot,ownerState:n})]})};var K=r(1676),Q=r(5920);function ee(e){return(0,k.Ay)("MuiRadio",e)}const oe=(0,w.A)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),re=["checked","checkedIcon","color","icon","name","onChange","size","className"],te=(0,j.Ay)(O.A,{shouldForwardProp:e=>(0,Y.A)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,"medium"!==r.size&&o[`size${(0,K.A)(r.size)}`],o[`color${(0,K.A)(r.color)}`]]}})((e=>{let{theme:o,ownerState:r}=e;return(0,v.A)({color:(o.vars||o).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:o.vars?`rgba(${"default"===r.color?o.vars.palette.action.activeChannel:o.vars.palette[r.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:(0,H.X4)("default"===r.color?o.palette.action.active:o.palette[r.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&{[`&.${oe.checked}`]:{color:(o.vars||o).palette[r.color].main}},{[`&.${oe.disabled}`]:{color:(o.vars||o).palette.action.disabled}})}));const ne=(0,N.jsx)(J,{checked:!0}),ae=(0,N.jsx)(J,{}),ie=t.forwardRef((function(e,o){var r,n;const a=(0,S.b)({props:e,name:"MuiRadio"}),{checked:i,checkedIcon:l=ne,color:s="primary",icon:d=ae,name:c,onChange:u,size:m="medium",className:p}=a,h=(0,y.A)(a,re),x=(0,v.A)({},a,{color:s,size:m}),f=(e=>{const{classes:o,color:r,size:t}=e,n={root:["root",`color${(0,K.A)(r)}`,"medium"!==t&&`size${(0,K.A)(t)}`]};return(0,v.A)({},o,(0,b.A)(n,ee,o))})(x),g=t.useContext(D);let A=i;const j=(0,Q.A)(u,g&&g.onChange);let w=c;var k,z;return g&&("undefined"===typeof A&&(k=g.value,A="object"===typeof(z=a.value)&&null!==z?k===z:String(k)===String(z)),"undefined"===typeof w&&(w=g.name)),(0,N.jsx)(te,(0,v.A)({type:"radio",icon:t.cloneElement(d,{fontSize:null!=(r=ae.props.fontSize)?r:m}),checkedIcon:t.cloneElement(l,{fontSize:null!=(n=ne.props.fontSize)?n:m}),ownerState:x,classes:f,name:w,checked:A,onChange:j,ref:o,className:(0,C.A)(f.root,p)},h))}));var le=r(9739),se=r(9267),de=r(6509),ce=r(9532),ue=r(1778),me=r(4968),pe=r(5604),he=r(2819);const xe=t.forwardRef((function(e,o){return(0,N.jsx)(a.A,{direction:"up",ref:o,...e})})),fe=(0,pe.A)((0,t.lazy)((()=>r.e(363).then(r.bind(r,6363))))),ge=e=>{var o,r;let{open:a,onClose:v,rowData:y}=e;const C=(0,i.A)(),b=(0,l.A)(C.breakpoints.down("xl")),j=(0,l.A)(C.breakpoints.down("sm")),S=(0,me.q)(),[w,k]=(0,t.useState)([]),[z,R]=(0,t.useState)(!1),[M,_]=(0,t.useState)(!1),[F,W]=(0,t.useState)(null),[E,$]=(0,t.useState)(null),[G,D]=(0,t.useState)({category_id:"",id:"",from:"",to:"",exclude:!1}),I=(0,ue.n)({mutationFn:()=>(0,he.lH)(y.category_id),onMutate:()=>{},onError:e=>{S("Error in Category Setting: "+e.message,"error")},onSuccess:e=>{const o=e.map((e=>{const[o,r]=e.station_range.split("/");return{...e,id:parseInt(e.id),from:o,to:r,exclude:e.exclude}}));k(o),S("Category Setting Fetched Successfully","success")}}),L=(0,ue.n)({mutationFn:e=>(0,he.yg)(e.id,e.category_id,e.from+"/"+e.to,e.exclude),onError:e=>{S("Error saving category setting: "+e.response.data,"error")},onSuccess:()=>{S("Category Setting saved successfully","success"),I.mutate()}}),H=(0,ue.n)({mutationFn:e=>(0,he.C9)(e),onError:e=>{S("Error deleting category setting: "+e.message,"error")},onSuccess:()=>{S("Category Setting deleted successfully","success"),I.mutate()}}),O=()=>{R(!1)};(0,t.useEffect)((()=>{y&&y.category_id&&I.mutate()}),[y]);const V=e=>{const{name:o,value:r}=e.target;D((e=>({...e,[o]:r})))},B=[{field:"from",headerName:"From",minWidth:100,flex:1,editable:!1,headerAlign:"center",align:"center"},{field:"to",headerName:"To",minWidth:100,editable:!1,flex:1,headerAlign:"center",align:"center"},{field:"exclude",headerName:"Exclude",minWidth:100,editable:!1,flex:1,headerAlign:"center",align:"center",renderCell:e=>(0,N.jsx)(s.A,{mt:1.8,children:e.value?"YES":"NO"})},{field:"actions",headerName:"Actions",minWidth:100,editable:!1,headerAlign:"center",align:"center",renderCell:e=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.A,{color:"primary",onClick:()=>{return o=e.row,D(o),void R(!0);var o},disabled:z,children:(0,N.jsx)(se.A,{sx:{fill:"lightgreen",fontSize:"large"}})}),(0,N.jsx)(d.A,{color:"secondary",onClick:()=>{return o=e.row,W(o.id),$(o),void _(!0);var o},disabled:M,children:(0,N.jsx)(de.A,{sx:{fill:"orange",fontSize:"large"}})})]})}];return(0,N.jsxs)(c.A,{children:[(0,N.jsxs)(u.A,{fullScreen:!0,open:a,onClose:v,"aria-labelledby":"responsive-dialog-title",TransitionComponent:xe,children:[(0,N.jsx)(m.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"lightgreen",color:C.palette.primary.main},children:(0,N.jsx)(s.A,{fontSize:"1.5rem",fontWeight:"500",children:"Category Setting Editor"})}),(0,N.jsxs)(p.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,N.jsxs)(c.A,{display:"flex",flexDirection:"row",children:[(0,N.jsxs)(s.A,{variant:"h3",gutterBottom:!0,children:[j?"":"Layout Section: ",(0,N.jsx)(s.A,{variant:"h3",color:"green",component:"span",style:{textTransform:"uppercase"},fontWeight:"600",children:null===y||void 0===y?void 0:y.layout_section})]}),(0,N.jsx)(c.A,{marginLeft:2,marginRight:2,borderLeft:1,borderColor:"grey.500",height:"85%"}),(0,N.jsxs)(s.A,{variant:"h3",gutterBottom:!0,children:[j?"":"Group Name: ",(0,N.jsx)(s.A,{variant:"h3",color:"green",component:"span",style:{textTransform:"uppercase"},fontWeight:"600",children:null===y||void 0===y?void 0:y.group_name})]})]}),(0,N.jsxs)(c.A,{width:b?"78vw":"100%",height:"65vh",position:"relative",children:[z?null:(0,N.jsx)(h.A,{color:"primary","aria-label":"add",sx:{position:"absolute",top:"30vh",right:-30,zIndex:1,backgroundColor:"dark"===C.palette.mode?"green":C.palette.primary.main},onClick:()=>{R(!0)},children:(0,N.jsx)(ce.A,{})}),(0,N.jsx)(n.z,{rows:w,columns:B,pageSize:5,rowsPerPageOptions:[5],disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,disableSelectionOnClick:!0,disableRowSelectionOnClick:!0,disableColumnSorting:!0,disableColumnResize:!0,hideFooter:!0,sx:{"& .super-app-theme--header":{backgroundColor:C.palette.background.paper,color:C.palette.text.secondary},"& .MuiDataGrid-cell":{color:C.palette.text.primary},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f0f0f0"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold",fontSize:"1rem"},minWidth:"100%"}}),(0,N.jsx)(x.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:v,sx:{backgroundColor:(C.palette.mode,"#f44336"),"&:hover":{backgroundColor:(C.palette.mode,"#d32f2f"),boxShadow:`0px 4px 6px ${C.palette.primary.main}`},marginTop:"10px"},children:"Close"})]})]})]}),(0,N.jsxs)(u.A,{open:z,onClose:O,PaperProps:{style:{backgroundColor:C.palette.background.default,color:C.palette.text.primary,minWidth:"90vw",minHeight:"55vh"}},children:[(0,N.jsx)(m.A,{color:C.palette.primary.main,mb:"5px",sx:{backgroundColor:"lightgreen",padding:"15px"},border:`1px solid ${C.palette.divider}`,children:(0,N.jsx)(s.A,{fontSize:"1.2rem",fontWeight:"500",children:""==G.id?"Add Category Setting":"Edit Category Setting"})}),(0,N.jsxs)(p.A,{children:[(0,N.jsxs)(c.A,{border:`1px solid ${C.palette.divider}`,borderRadius:1,p:2,width:"100%",children:[(0,N.jsx)(s.A,{children:"From Station:"}),(0,N.jsx)(f.A,{value:y.station_list.includes(G.from)?G.from:"",onChange:e=>V(e),name:"from",fullWidth:!0,children:null===(o=y.station_list)||void 0===o?void 0:o.split("/").map(((e,o)=>(0,N.jsx)(g.A,{value:e,children:e},o)))})]}),(0,N.jsxs)(c.A,{border:`1px solid ${C.palette.divider}`,borderRadius:1,p:2,width:"100%",mt:2,children:[(0,N.jsx)(s.A,{children:"To Station:"}),(0,N.jsx)(f.A,{value:y.station_list.includes(G.to)?G.to:"",onChange:e=>V(e),name:"to",fullWidth:!0,children:null===(r=y.station_list)||void 0===r?void 0:r.split("/").map(((e,o)=>(0,N.jsx)(g.A,{value:e,children:e},o)))})]}),(0,N.jsxs)(c.A,{border:`1px solid ${C.palette.divider}`,borderRadius:1,p:2,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",sx:{marginTop:2},children:[(0,N.jsx)(s.A,{mr:"auto",children:"Exclude:"}),(0,N.jsx)(A.A,{children:(0,N.jsxs)(P,{"aria-labelledby":"category-setting-exclude-group",name:"exclude",onChange:e=>V(e),value:G.exclude,row:!0,children:[(0,N.jsx)(T.A,{value:!0,control:(0,N.jsx)(ie,{}),label:"Yes"}),(0,N.jsx)(T.A,{value:!1,control:(0,N.jsx)(ie,{}),label:"No"})]})})]})]}),(0,N.jsxs)(le.A,{children:[(0,N.jsx)(x.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:""==G.id?()=>{""!=G.from||""!=G.to?(L.mutate({id:"",category_id:y.category_id,from:G.from||"",to:G.to||"",exclude:G.exclude||!1}),D({category_id:"",id:"",from:"",to:"",exclude:!1}),R(!1)):S("Nothing to add","error")}:()=>{""!=G.from||""!=G.to?(L.mutate({id:G.id,category_id:y.category_id,from:G.from||"",to:G.to||"",exclude:G.exclude||!1}),D({category_id:"",id:"",from:"",to:"",exclude:!1}),R(!1)):S("Nothing to update","error")},sx:{backgroundColor:(C.palette.mode,"#4caf50"),"&:hover":{backgroundColor:(C.palette.mode,"#388e3c"),boxShadow:`0px 4px 6px ${C.palette.primary.main}`}},children:""==G.id?"Add":"Save"}),(0,N.jsx)(x.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:O,sx:{backgroundColor:(C.palette.mode,"#f44336"),"&:hover":{backgroundColor:(C.palette.mode,"#d32f2f"),boxShadow:`0px 4px 6px ${C.palette.primary.main}`}},children:"Close"})]})]}),M?(0,N.jsx)(fe,{open:M,onClose:()=>{W(null),$(null),_(!1)},onConfirm:()=>{return e=F,H.mutate(e),void _(!1);var e},onRow:E}):null]})}},6509:(e,o,r)=>{var t=r(4994);o.A=void 0;var n=t(r(9526)),a=r(4414);o.A=(0,n.default)((0,a.jsx)("path",{d:"M6 21h12V7H6zm2.46-9.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForeverSharp")},9267:(e,o,r)=>{var t=r(4994);o.A=void 0;var n=t(r(9526)),a=r(4414);o.A=(0,n.default)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75z"}),"EditSharp")}}]);