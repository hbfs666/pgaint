"use strict";(self.webpackChunkkanban_frontend=self.webpackChunkkanban_frontend||[]).push([[67],{1067:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r=n(9950),o=n(6873),a=n(4857),i=n(6589),l=n(5333),s=n(6491),c=n(3230),d=n(4745),u=n(2053),p=n(2472),g=n(226),h=n(3464),m=n(33),x=n(8170),y=n(6),_=n(3266),f=n(9925),A=n(9739),b=n(2056),j=n(8999),C=n(4121),v=n(5604),k=n(9532),S=n(4968),W=n(1778),w=n(2819),I=n(4414);const T=(0,v.A)((0,r.lazy)((()=>n.e(173).then(n.bind(n,5173))))),N=(0,v.A)((0,r.lazy)((()=>n.e(247).then(n.bind(n,3247))))),P=(0,v.A)((0,r.lazy)((()=>n.e(860).then(n.bind(n,4860))))),q=(0,v.A)((0,r.lazy)((()=>n.e(382).then(n.bind(n,8382))))),z=e=>{let{kanbanRecord:t,setActiveStep:n}=e;const v=(0,a.A)(),z=(0,i.A)(v.breakpoints.down("xl")),D=(0,i.A)(v.breakpoints.down("sm")),E=(0,S.q)(),[G,H]=(0,r.useState)([]),[O,R]=(0,r.useState)(!1),[U,F]=(0,r.useState)(!1),[M,L]=(0,r.useState)(null),[B,$]=(0,r.useState)({category_id:"",group_name:"",group_condition:"",category_sequence:"",station_list:"",category_type:""}),[K,J]=(0,r.useState)(!1),[Y,Q]=(0,r.useState)(null),[V,X]=(0,r.useState)(null),Z=(0,W.n)({mutationFn:e=>(0,w.xx)(e),onError:e=>{E("Error deleting category group setting: "+e.message,"error")},onSuccess:()=>{E("Category Setting deleted successfully","success"),ee.mutate()}}),ee=(0,W.n)({mutationFn:()=>(0,w.BL)(t.mapping_key),onMutate:()=>{},onError:e=>{E("Error in creating kanban: "+e.message,"error")},onSuccess:e=>{H(e),E("Kanban fetched successfully","success")}}),te=(0,W.n)({mutationFn:e=>(0,w.J_)(t.mapping_key,e.category_id,e.group_name,e.group_condition,e.category_sequence,e.station_list,e.category_type),onError:e=>{E("Error saving category: "+e.response.data,"error")},onSuccess:()=>{E("Category saved successfully","success"),ee.mutate()}});(0,r.useEffect)((()=>{null==t&&E("Please create Kanban record ","error"),ee.mutate()}),[t]);const ne=e=>{null!=t?($(e),R(!0)):E("mapping key not found ","error")},re=()=>{R(!1)},oe=e=>{const{name:t,value:n}=e.target;$((e=>({...e,[t]:n})))},ae=[{field:"group_name",headerName:"Group Name",flex:1,minWidth:100,headerAlign:"center",align:"center"},{field:"group_condition",headerName:"Group Condition",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"category_type",headerName:"Category Type",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"station_list",headerName:"Station List",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"category_sequence",headerName:"Category Sequence",flex:1,minWidth:100,headerAlign:"center",align:"center"},{field:"actions",headerName:"Actions",sortable:!1,minWidth:150,headerAlign:"center",align:"center",renderCell:e=>(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.A,{color:"secondary",onClick:()=>{return t=e.row,Q(t),void J(!0);var t},children:(0,I.jsx)(b.A,{sx:{fill:"dark"===v.palette.mode?"white":"black",fontSize:"large"}})}),(0,I.jsx)(l.A,{color:"primary",onClick:()=>ne(e.row),children:(0,I.jsx)(j.A,{sx:{fill:"lightgreen",fontSize:"large"}})}),(0,I.jsx)(l.A,{color:"secondary",onClick:()=>{return t=e.row,X(t),L(t.category_id),void F(!0);var t},disabled:U,children:(0,I.jsx)(C.A,{sx:{fill:"orange",fontSize:"large"}})})]})}];return(0,I.jsxs)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minWidth:"100%",children:[(0,I.jsxs)(s.A,{width:z?"80vw":"100%",height:"65vh",position:"relative",children:[(0,I.jsx)(s.A,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",children:(0,I.jsxs)(c.A,{direction:"row",spacing:2,alignItems:"center",divider:(0,I.jsx)(d.A,{orientation:"vertical",flexItem:!0}),sx:{flexWrap:"wrap"},children:[(0,I.jsx)(s.A,{sx:{maxWidth:"100%",textAlign:{xs:"center",sm:"left"}},children:(0,I.jsxs)(u.A,{variant:"h3",gutterBottom:!0,children:[D?"":"Kanban Name: ",(0,I.jsx)(u.A,{variant:D?"h4":"h3",color:"green",component:"span",style:{textTransform:"uppercase"},fontWeight:"600",children:null===t||void 0===t?void 0:t.kanban_name})]})}),(0,I.jsx)(s.A,{sx:{maxWidth:"100%",textAlign:{xs:"center",sm:"left"}},children:(0,I.jsxs)(u.A,{variant:"h3",gutterBottom:!0,children:[D?"":"Product Type: ",(0,I.jsx)(u.A,{variant:D?"h4":"h3",color:"green",component:"span",style:{textTransform:"uppercase"},fontWeight:"600",children:null===t||void 0===t?void 0:t.product_type})]})})]})}),O?null:(0,I.jsx)(p.A,{color:"primary","aria-label":"add",sx:{position:"absolute",top:"30vh",right:-30,zIndex:1,backgroundColor:"dark"===v.palette.mode?"green":v.palette.primary.main},onClick:()=>ne({group_name:"",group_condition:"",station_list:"",category_sequence:""}),children:(0,I.jsx)(k.A,{})}),(0,I.jsx)(o.z,{rows:G,columns:ae,getRowId:e=>e.category_id,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,disableSelectionOnClick:!0,disableRowSelectionOnClick:!0,disableColumnSorting:!0,disableColumnResize:!0,hideFooter:!0,sx:{"& .super-app-theme--header":{backgroundColor:v.palette.background.paper,color:v.palette.text.secondary},"& .MuiDataGrid-cell":{color:v.palette.text.primary},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f0f0f0"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold",fontSize:"1rem"},minWidth:"100%"}}),(0,I.jsx)(g.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>n(2),sx:{backgroundColor:(v.palette.mode,"#4caf50"),"&:hover":{backgroundColor:(v.palette.mode,"#388e3c"),boxShadow:`0px 4px 6px ${v.palette.primary.main}`},marginTop:"10px"},children:"Next"})]}),(0,I.jsxs)(h.A,{open:O,onClose:re,PaperProps:{style:{backgroundColor:v.palette.background.default,color:v.palette.text.primary,minWidth:"60vw",minHeight:"80vh"}},children:[(0,I.jsx)(m.A,{color:v.palette.primary.main,mb:"5px",sx:{backgroundColor:"lightgreen",padding:"10px"},border:`1px solid ${v.palette.divider}`,children:B.category_id?"Edit Header | Group Name: "+B.group_name:"Add Header Category"}),(0,I.jsxs)(x.A,{children:[(0,I.jsxs)(s.A,{border:`1px solid ${v.palette.divider}`,borderRadius:1,p:2,width:"100%",children:[(0,I.jsx)(u.A,{children:"Group Name"}),(0,I.jsxs)(y.A,{value:B.group_name,onChange:e=>oe(e),name:"group_name",fullWidth:!0,id:"Header-Group-Name",children:[(0,I.jsx)(_.A,{value:"WIP",children:"WIP"}),(0,I.jsx)(_.A,{value:"INPUT",children:"INPUT"}),(0,I.jsx)(_.A,{value:"OUTPUT",children:"OUTPUT"})]})]}),(0,I.jsx)(N,{conditions:B.group_condition?B.group_condition.split("/"):[],onConditionsChange:e=>{$((t=>({...t,group_condition:e.join("/")})))},conditionsList:"DISPATCH_ID,SN_MODEL,DISPOSITION".split(",")}),(0,I.jsx)(T,{stations:B.station_list?B.station_list.split("/"):[],onStationsChange:e=>{$((t=>({...t,station_list:e.join("/")})))}}),(0,I.jsx)(f.A,{margin:"dense",label:"Category Sequence",name:"category_sequence",id:"category-sequence",value:B.category_sequence,onChange:oe,fullWidth:!0,type:"number",InputProps:{style:{color:v.palette.text.primary}}}),(0,I.jsxs)(s.A,{border:`1px solid ${v.palette.divider}`,borderRadius:1,p:2,width:"100%",children:[(0,I.jsx)(u.A,{children:"Category Type"}),(0,I.jsxs)(y.A,{value:B.category_type,onChange:e=>oe(e),label:"Category Type",name:"category_type",fullWidth:!0,id:"Body-category-Type",children:[(0,I.jsx)(_.A,{value:"hourly",children:"HOURLY"}),(0,I.jsx)(_.A,{value:"wip",children:"WIP"})]})]})]}),(0,I.jsxs)(A.A,{children:[(0,I.jsx)(g.A,{onClick:re,sx:{color:v.palette.error.main,fontWeight:"bold"},children:"Cancel"}),(0,I.jsx)(g.A,{onClick:B.category_id?()=>{te.mutate(B),R(!1)}:()=>{te.mutate({category_id:"",group_name:B.group_name||"",group_condition:B.group_condition||"",category_sequence:B.category_sequence||"",station_list:B.station_list||"",category_type:B.category_type||""}),R(!1)},color:"primary",sx:{color:v.palette.success.main,fontWeight:"bold"},children:"Save"})]})]}),Y&&(0,I.jsx)(P,{open:K,onClose:()=>{J(!1),Q(null)},rowData:Y}),U?(0,I.jsx)(q,{open:U,onClose:()=>{L(null),X(null),F(!1)},onConfirm:()=>{return e=M,Z.mutate(e),void F(!1);var e},onRow:V}):null]})}}}]);