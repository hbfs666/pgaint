"use strict";(self.webpackChunkkanban_frontend=self.webpackChunkkanban_frontend||[]).push([[836],{4836:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(9950),r=a(8429),o=a(4857),l=a(6491),i=a(2053),d=a(899),s=a(5979),p=a(3788),u=a(6),c=a(3266),m=a(9925),x=a(226),b=a(1778),y=a(2819),h=a(4968),v=a(1970),k=a(4414);const A="110".split(","),S="L5,L6,L7,L11".split(",");const g=e=>{let{setKanbanRecord:t,kanbanRecord:a,setActiveStep:g,mappingKey:f,setOnError:j}=e;const C=(0,h.q)(),[T,O]=(0,n.useState)({kanbanName:"",productType:"",rmaSite:"",envType:""}),[I,L]=(0,n.useState)(!1),[M,E]=(0,n.useState)(!1),N=(0,o.A)(),{reloadContext:P}=(0,v.I)(),_=((0,r.Zp)(),(0,b.n)({mutationFn:()=>(0,y.UD)(f),onMutate:()=>{L(!1)},onError:e=>{var t;C("Error in creating kanban: "+e.message+" "+(null===(t=e.response)||void 0===t?void 0:t.data),"error"),L(!0),j(!0)},onSuccess:e=>{L(!1),e.mapping_key=f,C("Kanban Setting fetched successfully","success"),t(e),O({kanbanName:e.kanban_name,productType:e.product_type,rmaSite:e.rma_site,envType:e.env_type}),E(!1)}})),W=(0,b.n)({mutationFn:()=>(0,y.x_)(f,T.kanbanName,T.productType,T.rmaSite,"PRO"),onMutate:()=>{L(!1)},onError:e=>{var t;C("Error in creating kanban: "+e.message+" "+(null===(t=e.response)||void 0===t?void 0:t.data),"error"),L(!0)},onSuccess:()=>{var e;L(!1),C("Kanban Setting updated successfully","success"),e=450,new Promise((t=>setTimeout(t,e))),P(),_.mutate()}});(0,n.useEffect)((()=>{""!=f&&_.mutate()}),[f]);const w=e=>{const{name:t,value:a}=e.target;E(!0),O({...T,[t]:a}),L(!0)};return(0,k.jsxs)(l.A,{sx:{maxWidth:400,mx:"auto",p:4,boxShadow:3,borderRadius:2,backgroundColor:N.palette.background.paper,color:N.palette.text.primary},children:[(0,k.jsx)(i.A,{variant:"h4",align:"center",gutterBottom:!0,children:"Edit Kanban Information"}),(0,k.jsx)("form",{onSubmit:e=>{e.preventDefault(),W.mutate()},id:"create-kanban",children:(0,k.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,k.jsx)(d.Ay,{item:!0,xs:12,children:(0,k.jsxs)(s.A,{fullWidth:!0,variant:"outlined",children:[(0,k.jsx)(p.A,{id:"rmaSite-label",style:{color:N.palette.text.secondary},children:"RMA SITE"}),(0,k.jsx)(u.A,{labelId:"rmaSite-label",id:"rmaSite",name:"rmaSite",value:T.rmaSite,onChange:w,label:"RMA SITE",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:N.palette.text.secondary},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:N.palette.primary.main}},inputProps:{style:{color:N.palette.text.primary}},children:A.map((e=>(0,k.jsx)(c.A,{value:e,children:e},e)))})]})}),(0,k.jsx)(d.Ay,{item:!0,xs:12,children:(0,k.jsx)(m.A,{fullWidth:!0,label:"Kanban Name",name:"kanbanName",value:T.kanbanName,onChange:w,variant:"outlined",id:"kanbanName",InputProps:{style:{color:N.palette.text.primary}},InputLabelProps:{style:{color:N.palette.text.secondary}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:N.palette.text.secondary},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:N.palette.primary.main}}})}),(0,k.jsx)(d.Ay,{item:!0,xs:12,children:(0,k.jsxs)(s.A,{fullWidth:!0,variant:"outlined",children:[(0,k.jsx)(p.A,{id:"productType-label",style:{color:N.palette.text.secondary},children:"Product Type"}),(0,k.jsxs)(u.A,{labelId:"productType-label",id:"productType",name:"productType",value:T.productType,onChange:w,label:"Product Type",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:N.palette.text.secondary},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:N.palette.primary.main}},inputProps:{style:{color:N.palette.text.primary}},children:[S.includes(T.productType)?null:S.push(T.productType),S.map((e=>(0,k.jsx)(c.A,{value:e,children:"L11"==e?"MAC (L11)":"L7"==e?"WATCH (L7)":"L5"==e?"PHONE (L5)":e},e)))]})]})}),(0,k.jsxs)(d.Ay,{item:!0,xs:12,mt:2,children:[(0,k.jsx)(x.A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:!M,sx:{backgroundColor:"dark"===N.palette.mode?"#4caf50":"#1976d2","&:hover":{backgroundColor:"dark"===N.palette.mode?"#388e3c":"#115293",boxShadow:`0px 4px 6px ${N.palette.primary.main}`}},children:"Update"}),(0,k.jsx)(l.A,{m:1}),(0,k.jsx)(x.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>g(1),sx:{backgroundColor:"#4caf50","&:hover":{backgroundColor:"#388e3c"===N.palette.mode,boxShadow:`0px 4px 6px ${N.palette.primary.main}`}},children:"Next"})]})]})})]})}}}]);