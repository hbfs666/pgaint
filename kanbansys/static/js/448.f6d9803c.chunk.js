"use strict";(self.webpackChunkkanban_frontend=self.webpackChunkkanban_frontend||[]).push([[448],{67:(e,n,t)=>{t.r(n),t.d(n,{default:()=>D});var r=t(9950),o=t(8429),a=t(6873),i=t(4857),l=t(6589),s=t(5333),c=t(6491),d=t(3230),u=t(4745),p=t(2053),g=t(2472),m=t(899),h=t(226),x=t(3464),y=t(33),_=t(8170),A=t(9925),b=t(6),f=t(3266),C=t(9739),j=t(2056),v=t(8999),k=t(4121),S=t(5604),w=t(9532),W=t(4968),q=t(1778),N=t(1970),R=t(2819),E=t(4414);const I=(0,S.A)((0,r.lazy)((()=>t.e(173).then(t.bind(t,5173))))),T=(0,S.A)((0,r.lazy)((()=>t.e(247).then(t.bind(t,3247))))),z=(0,S.A)((0,r.lazy)((()=>t.e(860).then(t.bind(t,4860))))),P=(0,S.A)((0,r.lazy)((()=>t.e(382).then(t.bind(t,8382))))),G=(0,S.A)((0,r.lazy)((()=>t.e(131).then(t.bind(t,9131)))));const D=e=>{let{kanbanRecord:n,setActiveStep:t}=e;const{reloadContext:S}=(0,N.I)(),D=(0,i.A)(),F=(0,l.A)(D.breakpoints.down("xl")),O=(0,l.A)(D.breakpoints.down("sm")),$=(0,W.q)(),[M,B]=(0,r.useState)([]),[H,L]=(0,r.useState)(!1),[K,Y]=(0,r.useState)(!1),[U,Z]=(0,r.useState)(!1),[J,Q]=(0,r.useState)(null),[V,X]=(0,r.useState)({category_id:"",group_name:"",group_condition:"",category_sequence:"",station_list:"",category_name:"",group_sequence:"",category_type:""}),ee=(0,o.Zp)(),[ne,te]=(0,r.useState)(!1),[re,oe]=(0,r.useState)(null),[ae,ie]=(0,r.useState)(null),le=(0,q.n)({mutationFn:e=>(0,R.xx)(e),onError:e=>{$("Error deleting category group setting: "+e.message,"error")},onSuccess:()=>{$("Category Setting deleted successfully","success"),ce.mutate()}}),se=(0,q.n)({mutationFn:e=>(0,R.I1)(e),onError:e=>{$("Error in activate kanban: "+e.message,"error")},onSuccess:async()=>{var e;$("Activate Kanban","success"),S(),await(e=450,new Promise((n=>setTimeout(n,e)))),ee("/kanban/"+n.mapping_key),window.location.reload()}}),ce=(0,q.n)({mutationFn:()=>(0,R.WF)(n.mapping_key),onMutate:()=>{},onError:e=>{$("Error in creating kanban: "+e.message,"error")},onSuccess:e=>{B(e),$("Kanban body fetched successfully","success")}}),de=(0,q.n)({mutationFn:e=>(0,R.Ev)(n.mapping_key,e.category_id,e.group_name,e.group_condition,e.category_sequence,e.station_list,e.category_name,e.group_sequence,e.category_type),onError:e=>{$("Error saving category: "+e.response.data,"error")},onSuccess:()=>{$("Category saved successfully","success"),ce.mutate()}});(0,r.useEffect)((()=>{null==n&&$("Please create Kanban record ","error"),ce.mutate()}),[n]);const ue=e=>{null!=n?(X(e),L(!0)):$("mapping key not found ","error")},pe=()=>{L(!1)},ge=e=>{const{name:n,value:t}=e.target;X((e=>({...e,[n]:t})))},me=[{field:"group_name",headerName:"Group Name",flex:1,minWidth:100,headerAlign:"center",align:"center"},{field:"group_condition",headerName:"Group Condition",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"station_list",headerName:"Station List",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"category_name",headerName:"Category Name",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"group_sequence",headerName:"Group Sequence",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"category_type",headerName:"Category Type",flex:1,minWidth:150,headerAlign:"center",align:"center"},{field:"category_sequence",headerName:"Category Sequence",flex:1,minWidth:100,headerAlign:"center",align:"center"},{field:"actions",headerName:"Actions",sortable:!1,minWidth:150,headerAlign:"center",align:"center",renderCell:e=>(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(s.A,{color:"secondary",onClick:()=>{return n=e.row,oe(n),void te(!0);var n},children:(0,E.jsx)(j.A,{sx:{fill:"dark"===D.palette.mode?"white":"black",fontSize:"large"}})}),(0,E.jsx)(s.A,{color:"primary",onClick:()=>ue(e.row),children:(0,E.jsx)(v.A,{sx:{fill:"lightgreen",fontSize:"large"}})}),(0,E.jsx)(s.A,{color:"secondary",onClick:()=>{return n=e.row,ie(n),Q(n.category_id),void Y(!0);var n},disabled:K,children:(0,E.jsx)(k.A,{sx:{fill:"orange",fontSize:"large"}})})]})}];return(0,E.jsxs)(c.A,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minWidth:"100%",children:[(0,E.jsxs)(c.A,{width:F?"90vw":"100%",height:"65vh",position:"relative",children:[(0,E.jsx)(c.A,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",children:(0,E.jsxs)(d.A,{direction:"row",spacing:2,alignItems:"center",divider:(0,E.jsx)(u.A,{orientation:"vertical",flexItem:!0}),sx:{flexWrap:"wrap"},children:[(0,E.jsx)(c.A,{sx:{maxWidth:"100%",textAlign:{xs:"center",sm:"left"}},children:(0,E.jsxs)(p.A,{variant:"h3",gutterBottom:!0,children:[O?"":"Kanban Name: ",(0,E.jsx)(p.A,{variant:O?"h4":"h3",color:"green",component:"span",style:{textTransform:"uppercase"},fontWeight:"600",children:null===n||void 0===n?void 0:n.kanban_name})]})}),(0,E.jsx)(c.A,{sx:{maxWidth:"100%",textAlign:{xs:"center",sm:"left"}},children:(0,E.jsxs)(p.A,{variant:"h3",gutterBottom:!0,children:[O?"":"Product Type: ",(0,E.jsx)(p.A,{variant:O?"h4":"h3",color:"green",component:"span",style:{textTransform:"uppercase"},fontWeight:"600",children:null===n||void 0===n?void 0:n.product_type})]})})]})}),H?null:(0,E.jsx)(g.A,{color:"primary","aria-label":"add",sx:{position:"absolute",top:"30vh",right:-30,zIndex:1,backgroundColor:"dark"===D.palette.mode?"green":D.palette.primary.main},onClick:()=>ue({group_name:"",group_condition:"",station_list:"",category_sequence:0,group_sequence:0,category_name:"",category_type:""}),children:(0,E.jsx)(w.A,{})}),(0,E.jsx)(a.z,{rows:M,columns:me,getRowId:e=>e.category_id,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,disableSelectionOnClick:!0,disableRowSelectionOnClick:!0,disableColumnSorting:!0,disableColumnResize:!0,hideFooter:!0,sx:{"& .super-app-theme--header":{backgroundColor:D.palette.background.paper,color:D.palette.text.secondary},"& .MuiDataGrid-cell":{color:D.palette.text.primary},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f0f0f0"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold",fontSize:"1rem"},minWidth:"100%"}}),(0,E.jsx)(c.A,{children:(0,E.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,E.jsx)(m.Ay,{item:!0,xs:6,children:(0,E.jsx)(h.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>t(1),sx:{backgroundColor:(D.palette.mode,"#1976d2"),"&:hover":{backgroundColor:(D.palette.mode,"#1565c0"),boxShadow:`0px 4px 6px ${D.palette.primary.main}`},marginTop:"10px"},children:"Perious"})}),(0,E.jsx)(m.Ay,{item:!0,xs:6,children:(0,E.jsx)(h.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>{Z(!0)},sx:{backgroundColor:(D.palette.mode,"#4caf50"),"&:hover":{backgroundColor:(D.palette.mode,"#388e3c"),boxShadow:`0px 4px 6px ${D.palette.primary.main}`},marginTop:"10px"},children:"Confirm"})})]})})]}),(0,E.jsxs)(x.A,{open:H,onClose:pe,PaperProps:{style:{backgroundColor:D.palette.background.default,color:D.palette.text.primary,minWidth:"60vw",minHeight:"80vh"}},children:[(0,E.jsx)(y.A,{color:D.palette.primary.main,mb:"5px",sx:{backgroundColor:"lightgreen",padding:"10px"},border:`1px solid ${D.palette.divider}`,children:V.category_id?"Edit Body Group Name: "+V.group_name:"Add Body Category "}),(0,E.jsxs)(_.A,{children:[(0,E.jsx)(c.A,{border:`1px solid ${D.palette.divider}`,borderRadius:1,p:2,width:"100%",children:(0,E.jsx)(A.A,{margin:"dense",label:"Group Name",name:"group_name",id:"group-name",value:V.group_name,onChange:ge,fullWidth:!0,type:"string",InputProps:{style:{color:D.palette.text.primary}}})}),(0,E.jsx)(c.A,{border:`1px solid ${D.palette.divider}`,borderRadius:1,p:2,width:"100%",children:(0,E.jsx)(A.A,{margin:"dense",label:"Group Sequence",name:"group_sequence",id:"group-sequence",value:V.group_sequence,onChange:ge,fullWidth:!0,type:"number",InputProps:{style:{color:D.palette.text.primary}}})}),(0,E.jsx)(T,{conditions:V.group_condition?V.group_condition.split("/"):[],onConditionsChange:e=>{X((n=>({...n,group_condition:e.join("/")})))},conditionsList:"DISPATCH_ID,SN_MODEL,SERIAL_NR,TRAN_OWNER,OWNER_CATEGORY".split(",")}),(0,E.jsx)(I,{stations:V.station_list?V.station_list.split("/"):[],onStationsChange:e=>{X((n=>({...n,station_list:e.join("/")})))}}),(0,E.jsx)(A.A,{margin:"dense",label:"Category Sequence",name:"category_sequence",id:"category-sequence",value:V.category_sequence,onChange:ge,fullWidth:!0,type:"number",InputProps:{style:{color:D.palette.text.primary}}}),(0,E.jsx)(c.A,{border:`1px solid ${D.palette.divider}`,borderRadius:1,p:2,width:"100%",children:(0,E.jsx)(A.A,{margin:"dense",label:"Category Name",name:"category_name",id:"category-name",value:V.category_name,onChange:ge,fullWidth:!0,type:"string",InputProps:{style:{color:D.palette.text.primary}}})}),(0,E.jsxs)(c.A,{border:`1px solid ${D.palette.divider}`,borderRadius:1,p:2,width:"100%",children:[(0,E.jsx)(p.A,{children:"Category Type"}),(0,E.jsxs)(b.A,{value:V.category_type,onChange:e=>ge(e),label:"Category Type",name:"category_type",fullWidth:!0,id:"Body-category-Type",children:[(0,E.jsx)(f.A,{value:"hourly",children:"HOURLY"}),(0,E.jsx)(f.A,{value:"wip",children:"WIP"})]})]})]}),(0,E.jsxs)(C.A,{children:[(0,E.jsx)(h.A,{onClick:pe,sx:{color:D.palette.error.main,fontWeight:"bold"},children:"Cancel"}),(0,E.jsx)(h.A,{onClick:V.category_id?()=>{de.mutate(V),L(!1)}:()=>{de.mutate({category_id:"",group_name:V.group_name||"",group_condition:V.group_condition||"",category_sequence:V.category_sequence||0,station_list:V.station_list||"",category_name:V.category_name||"",group_sequence:V.group_sequence||0,category_type:V.category_type||""}),L(!1)},color:"primary",sx:{color:D.palette.success.main,fontWeight:"bold"},children:"Save"})]})]}),re&&(0,E.jsx)(z,{open:ne,onClose:()=>{te(!1),oe(null)},rowData:re}),K?(0,E.jsx)(P,{open:K,onClose:()=>{Q(null),ie(null),Y(!1)},onConfirm:()=>{return e=J,le.mutate(e),Y(!1),void ie(null);var e},onRow:ae}):null,U?(0,E.jsx)(G,{open:U,onClose:()=>{Z(!1)},onConfirm:()=>{se.mutate(n.mapping_key)},kanbanRecord:n}):null]})}}}]);